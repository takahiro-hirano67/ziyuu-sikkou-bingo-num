# bingo-num-app

## このアプリについて

このアプリは、ビンゴの当選番号周りの管理で人為的なミスを完全に防ぐために作成しました。

---

### アプリの概要

* 景品は1人につき最大1点当選
* 参加者数 ≧ 景品数 である場合でのみ処理を実行できます
* 参加人数よりも景品数が多い場合、この場で比較的価値の低い景品から景品プールから超過分を除外します。
  除外した景品は、次回以降のイベントに持ち越します。

もし、除外対象の景品を今回の景品に含めてほしいという要望があれば、景品プール内の景品と交換します。

運営側の都合となり大変恐れ入りますが、
食品やシーズンアイテムは優先的に景品プールに含めさせていただきます。
高額景品や人気景品は必ず景品プールに含みます。

---

### 主な変数について

**景品id（現実）:**

* 1～景品総数
* 数値が低いほど価値が高い
* 数値が高いほど比較的価値が低く、高い値から順に景品プールから除外される
* 景品idと参加者が選択する景品番号は連動していない
* 景品idと自動で割り当てられる当選番号は連動している

**参加人数:**

* ビンゴに参加する人数の総数
* ビンゴ開始前に必ず参加人数を再確認する
* ビンゴ開始後の途中参加は不可能

**景品数:**

* 景品プール内に含む景品数
* 必ず `参加者数 ≧ 景品数` となるよう調整

**景品番号:**

* 1～景品プール内の景品数
* ビンゴした人は一度だけ選択可能

**当選番号:**

* 景品番号に対応してランダムに割り当てられる
* 景品発表の際に初めて判明する

---

### イメージ画像

<img width="1920" height="1080" alt="Image" src="https://github.com/user-attachments/assets/ba3ab150-69fd-449d-94f2-51daf40ed50b" />

---

### 公平性について

当選番号を割り当てる処理には公平性を確保しています。
シャッフルに利用しているアルゴリズム: `Fisher-Yates shuffle`

当選番号の処理に不正を疑う場合は、お手数をおかけしますがソースコードを解析してください。
ソースコードはGitHubのリポジトリ上で公開しています。

[リポジトリへのリンク（GitHub）](https://github.com/takahiro-hirano67/ziyuu-sikkou-bingo-num.git)



---
### 従来の流れと問題点
イベントの参加人数 > 景品数 の場合は何も気にすることはない。

しかし、イベントの参加人数 < 景品数 となる場合が多い。
この時、運営側としては目玉景品や食品系を確実に排出しておきたい。

従来は手動でランダムな当選番号を挿入していた。
そして、参加人数に応じた景品番号を 10人参加の場合の景品番号, 11人参加の場合の景品番号... のように個別で割り当てていた。

ただし、当日の人数が想定以上に少なかった場合、対応できないケースが出てくる。
本番その場で景品番号を割り当てていたり、そもそも景品番号を設定する箇所が多く、ミスは防ぎきれない。

→プログラムで公平に、そして確実にミスを防げるよう管理したい。
実際に2回ミスがあり、30,000円分の当選者が2人いるという事態が発生したこともある。

### アプローチ:
イベントの参加人数 > 景品数 の場合は情報を適切に入力して実行。
イベントの参加人数 < 景品数 となる場合は、本番その場で景品数===参加者数に合わせる。

この時、参加者の前で 「今回は想定よりも参加人数が少ないため、価値の低いビンゴの景品は次回以降のイベントに持ち越します。
これらの景品の中で、今回のビンゴの景品に含めたいものはありますか？」と確認を取り、景品プールから除外する。

こうすることで、イベントの参加人数 < 景品数　は物理的に発生することはない。

起こり得る状況 参加者数 > 景品数 --> 正常 参加者数 === 景品数 --> 物理的に合わせる